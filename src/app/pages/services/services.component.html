<div class="services-container">
    <h1>Services</h1>

    <!-- Alert Message -->
    <div *ngIf="alertMessage" class="alert">
        {{ alertMessage }}
    </div>

    <div class="card-container">
        <div class="card">
            <h2>Registrar Solicitud</h2>
            <form (ngSubmit)="registrarSolicitud()">
                <label>
                    Nombre del Cliente:
                    <input [(ngModel)]="nuevaSolicitud.clienteNombre" name="clienteNombre" required />
                </label>
                <label>
                    Correo del Cliente:
                    <input [(ngModel)]="nuevaSolicitud.clienteCorreo" name="clienteCorreo" required />
                </label>
                <label>
                    Teléfono del Cliente:
                    <input [(ngModel)]="nuevaSolicitud.clienteTelefono" name="clienteTelefono" required />
                </label>
                <label>
                    Descripción:
                    <textarea [(ngModel)]="nuevaSolicitud.descripcion" name="descripcion" required></textarea>
                </label>
                <button type="submit">Registrar</button>
            </form>
        </div>

        <div class="card">
            <h2>Asignar Técnico</h2>
            <form (ngSubmit)="asignarTecnico()">
                <label>
                    ID de la Solicitud:
                    <input type="number" [(ngModel)]="solicitudId" name="solicitudId" required />
                </label>
                <label>
                    Selecciona Técnico:
                    <select [(ngModel)]="tecnicoId" name="tecnicoId" required>
                        <option *ngFor="let tecnico of tecnicos" [value]="tecnico.id">
                            {{ tecnico.nombre }} - {{ tecnico.tipo }}
                        </option>
                    </select>
                </label>
                <button type="submit">Asignar Técnico</button>
            </form>
        </div>
    </div>

    <div class="card">
        <h2>Filtros</h2>
        <label>
            Filtrar por Nombre del Cliente:
            <input [(ngModel)]="clienteNombre" name="clienteNombre" />
        </label>
        <label>
            Filtrar por Técnico Asignado:
            <select [(ngModel)]="tecnicoId" name="tecnicoId">
                <option value="">Todos</option>
                <option *ngFor="let tecnico of tecnicos" [value]="tecnico.id">{{ tecnico.nombre }}</option>
            </select>
        </label>
        <button class="buttonid" (click)="filtrarSolicitudesPorCliente()">Filtrar por Cliente</button>
        <button class="buttonid" (click)="filtrarSolicitudesPorTecnico()">Filtrar por Técnico</button>
    </div>

    <div class="services-list">
        <h2>Lista de Solicitudes de Servicio</h2>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre del Cliente</th>
                    <th>Correo</th>
                    <th>Teléfono</th>
                    <th>Descripción</th>
                    <th>Técnico Asignado</th>
                    <th>Fecha de Creación</th>
                    <th>Fecha de Actualización</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let request of serviceRequests">
                    <td>{{ request.id }}</td>
                    <td>{{ request.clienteNombre }}</td>
                    <td>{{ request.clienteCorreo }}</td>
                    <td>{{ request.clienteTelefono }}</td>
                    <td>{{ request.descripcion }}</td>

                    <td>{{ request.tecnicoAsignado }}</td>
                    <td>{{ request.fechaCreacion | date }}</td>
                    <td>{{ request.fechaActualizacion | date }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>